 <!DOCTYPE html> <html> <head> <title>module:capri/doc-manager</title> <meta name="description" content="API documentation for open source project Capri." /> <meta name="keywords" content="docs, documentation, api, javascript, capri, jquery, jquery plugin, javascript framework, oop, object-oriented, classes, namespaces, classical, inheritance" /> <script src="http://shjs.sourceforge.net/sh_main.min.js"></script> <script src="http://shjs.sourceforge.net/lang/sh_javascript.min.js"></script> <link rel="stylesheet" type="text/css" href="../style/syntax.css" /> <link rel="stylesheet" type="text/css" href="../style/main.css" /> <link rel="stylesheet" type="text/css" href="../style/docs.css" /> <link rel="alternate" type="application/rss+xml" title="Rotorz &raquo; Capri Feed" href="http://rotorz.com/blog/category/capri/feed/" /> <link rel="alternate" type="application/rss+xml" title="Rotorz &raquo; Feed" href="http://rotorz.com/blog/feed/" /> <!--[if lt IE 9]> <script type="text/javascript" src="../script/ie-html5-fix.js"></script> <![endif]--> </head> <body class="capri-api-docs context-type-module id-module.capri-doc-manager"> <div class="wrap"> <header id="page-header"> <nav class="site-nav"> <ul> <li class="first"><a href="http://capri.rotorz.com">Home</a></li> <li><a href="http://capri.rotorz.com/about.html">About</a></li> <li><a href="http://capri.rotorz.com/getting-started.html">Docs</a></li> <li class="last"><a href="http://rotorz.com/blog/category/capri">Blog</a></li> </ul> </nav> <a class="home" href="http://capri.rotorz.com"><img src="http://capri.rotorz.com/img/home.png" alt="Capri Title" /></a> <nav class="sub-nav"> <ul> <li><a href="http://capri.rotorz.com/getting-started.html">Getting Started</a></li> <li><a href="http://capri.rotorz.com/tutorials.html">Tutorials</a></li> <li><a href="http://capri.rotorz.com/docs/global.html">API</a></li> </ul> </nav> </header> <div class="content-wrap"> <div id="doc-content"> <section class="container-namespace"> <header> <h2 class="breadcrumbs"><a href="global.html">global</a></h2> <h1>module:capri/doc-manager<span class="container-type">Module</span></h1> </header> <article> <div class="container-body"> <div class="summary"><div class="para">Dynamic document management functionality</div></div> <dl class="details"> <dt class="detail-see">See</dt> <dd class="detail-see"> <ul> <li><div class="para"><a href="http://capri.rotorz.com">http://capri.rotorz.com</a></div></li> </ul> </dd> <dt class="detail-author">Author</dt> <dd class="detail-author"> <ul> <li><a class="email" href="mailto:<lea@rotorz.com>">Lea Hayes</a></li> </ul> </dd> <dt class="detail-copyright">Copyright</dt> <dd class="detail-copyright"> <ul> <li><div class="para">(c) 2010-2011 Rotorz Limited. All rights reserved.</div></li> </ul> </dd> <dt class="detail-license">License</dt> <dd class="detail-license"> <ul> <li><div class="para">Licensed under the BSD and GPL licenses (<a href="http://capri.rotorz.com/license.html">http://capri.rotorz.com/license.html</a>)</div></li> </ul> </dd> <dt class="detail-requires">Requires:</dt> <dd class="detail-requires"> <ul> <li><a href="module.capri-core.html">capri/core</a></li> <li>jquery</li> </ul> </dd> <dt class="detail-source">Source:</dt> <dd class="detail-source"> <span class="filepath">../module/doc-manager.js</span>, <a class="lineno" href="http://github.com/rotorz/capri/blob/master/module/doc-manager.js#L1">Line: 1</a> </dd> </dl> </div> <h3>Namespaces</h3> <ul class="toc"> <li> <a href="capri-documentmanager.html">capri.DocumentManager</a> <div class="summary"><div class="para">Capri document management functionality</div></div> </li> </ul> <h3>Methods</h3> <ul class="toc"> <li><a href="#$clientUri">$clientUri(uri, [query])<span class="type-signature"> -> {string}</span></a></li> <li><a href="#$include">$include(uri, [callback], [force])</a></li> <li><a href="#$include,process">$include.process()</a></li> <li><a href="#$startup">$startup(callback)</a></li> <li><a href="#$startup,process"><span class="type-signature">&lt;protected&gt;</span> $startup.process()</a></li> </ul> <dl> <dt class="method-body" id="$clientUri"> <h4 id="$clientUri">$clientUri(uri, [query])<span class="type-signature"> -> {string}</span></h4> </dt> <dd> <div class="summary"><div class="para">Resolve URI for use in client</div></div> <div class="description"><div class="para"> Generate URI for use in client (web browser) by replacing tilde <samp>~</samp> character with base URI of website. Additional query arguments can be added to URI for convenience. </div></div> <dl class="details"> <dt class="detail-source">Source:</dt> <dd class="detail-source"> <span class="filepath">../module/doc-manager.js</span>, <a class="lineno" href="http://github.com/rotorz/capri/blob/master/module/doc-manager.js#L16">Line: 16</a> &nbsp;&nbsp;&nbsp;(&nbsp;Module: <a href="module.capri-doc-manager.html">capri/doc-manager</a>&nbsp;) </dd> </dl> <h5>Parameters</h5> <table class="params"> <thead> <tr> <th class="param-name">Name</th> <th class="param-type">Type</th> <th class="param-argument">Argument</th> <th class="description">Description</th> </tr> </thead> <tbody> <tr> <td class="param-name"><code class="name">uri</code></td> <td class="param-type">string</td> <td class="param-argument"></td> <td class="description"><div class="para">URI that must be resolved</div></td> </tr> <tr> <td class="param-name"><code class="name">query</code></td> <td class="param-type">string | object</td> <td class="param-argument">&lt;optional&gt;</td> <td class="description"><div class="para">Query arguments</div></td> </tr> </tbody> </table> <h5>Returns:</h5><dl class="type-details returns"><div class="type-desc"><div class="para">Resolved URI</div></div><dt>Type</dt><dd><span class="param-type">string</span></dd></dl> <h5>Example</h5> <p class="example-caption"></p> <pre class="example sh_javascript"><code>// Initialise base URI of website
capri.DocumentManager.setBaseUri('http://example.com/blog/');

// elsewhere...

uri = $clientUri('~/about', 'section=intro');
// "http://example.com/blog/about?section=intro"

uri = $clientUri('http://example.com/blog/about', 'section=intro');
// "http://example.com/blog/about?section=intro"

uri = $clientUri('~/about?section=intro', 'labels=off');
// "http://example.com/blog/about?section=intro&labels=off"</code></pre> </dd> <dt class="method-body" id="$include"> <h4 id="$include">$include(uri, [callback], [force])</h4> </dt> <dd> <div class="summary"><div class="para">Dynamically include script or stylesheet</div></div> <div class="description"><div class="para"> Note: Tilde <samp>~</samp> can be used in place of base URI of application if document base URI has been specified (see Ex#2). </div></div> <dl class="details"> <dt class="detail-see">See</dt> <dd class="detail-see"> <ul> <li><div class="para"><a href="capri-documentmanager.html">capri.DocumentManager</a></div></li> </ul> </dd> <dt class="detail-source">Source:</dt> <dd class="detail-source"> <span class="filepath">../module/doc-manager.js</span>, <a class="lineno" href="http://github.com/rotorz/capri/blob/master/module/doc-manager.js#L96">Line: 96</a> &nbsp;&nbsp;&nbsp;(&nbsp;Module: <a href="module.capri-doc-manager.html">capri/doc-manager</a>&nbsp;) </dd> </dl> <h5>Parameters</h5> <table class="params"> <thead> <tr> <th class="param-name">Name</th> <th class="param-type">Type</th> <th class="param-argument">Argument</th> <th class="description">Description</th> </tr> </thead> <tbody> <tr> <td class="param-name"><code class="name">uri</code></td> <td class="param-type">string</td> <td class="param-argument"></td> <td class="description"><div class="para">URI</div></td> </tr> <tr> <td class="param-name"><code class="name">callback</code></td> <td class="param-type">function | null</td> <td class="param-argument">&lt;optional&gt;</td> <td class="description"><div class="para">Callback executed once script has loaded</div></td> </tr> <tr> <td class="param-name"><code class="name">force</code></td> <td class="param-type">boolean</td> <td class="param-argument">&lt;optional&gt;</td> <td class="description"><div class="para">Defaults to <samp>false</samp>. <ul> <li><samp>true</samp> - force execution of script</li> <li><samp>false</samp> - avoid execution of script if previously executed</li> </ul></div></td> </tr> </tbody> </table> <h5>Examples</h5> <p class="example-caption">Ex#1. Include absolute URI</p> <pre class="example sh_javascript"><code>$include('http://example.com/js/myscript.js');</code></pre> <p class="example-caption">Ex#2. Include with Base URI</p> <pre class="example sh_javascript"><code>$include('~/js/myscript.js');</code></pre> <p class="example-caption">Ex#3. Includes with callback</p> <pre class="example sh_javascript"><code>$include('~/js/first.js');
$include('~/js/second.js', function() {
   // Callback invoked once both 'first.js' and 'second.js' have loaded.
   // Will not execute if script throwns an exception during loading.
});</code></pre> <p class="example-caption">Ex#4. Force re-inclusion of previously included script</p> <pre class="example sh_javascript"><code>$include('~/js/render-object.js', null, true);
$include('~/js/render-object.js', null, true);
$include.process();</code></pre> </dd> <dt class="method-body" id="$include,process"> <h4 id="$include,process">$include.process()</h4> </dt> <dd> <div class="summary"><div class="para">Process queued script and stylesheet includes</div></div> <div class="description"><div class="para"> Dynamic includes must be manually processed once initial startup has completed. </div></div> <dl class="details"> <dt class="detail-source">Source:</dt> <dd class="detail-source"> <span class="filepath">../module/doc-manager.js</span>, <a class="lineno" href="http://github.com/rotorz/capri/blob/master/module/doc-manager.js#L137">Line: 137</a> &nbsp;&nbsp;&nbsp;(&nbsp;Module: <a href="module.capri-doc-manager.html">capri/doc-manager</a>&nbsp;) </dd> </dl> <h5>Throws:</h5><dl class="type-details throws"><div class="type-desc"><div class="para">Cannot process includes until page has finished loading</div></div><dt>Type</dt><dd><span class="param-type"><a href="caprierror.html">CapriError</a></span></dd></dl> <h5>Example</h5> <p class="example-caption">Perform script inclusion</p> <pre class="example sh_javascript"><code>function setWindowSkin(skinName) {
   // Note: This is merely an example of how dynamic includes might be used!

   // Queue includes
   $include('~/skin/' + skinName + '/style.css');
   $include('~/skin/' + skinName + '/skin.js', function() {
      // Apply velvit skin to application window
      $('#app-window')
         .applyAppSkin(skinName);
   });

   // Process includes
   $include.process();
}</code></pre> </dd> <dt class="method-body" id="$startup"> <h4 id="$startup">$startup(callback)</h4> </dt> <dd> <div class="summary"><div class="para">Execute callback upon startup</div></div> <div class="description"><div class="para"> Callback is executed once both DOM and includes have been loaded. </div></div> <dl class="details"> <dt class="detail-source">Source:</dt> <dd class="detail-source"> <span class="filepath">../module/doc-manager.js</span>, <a class="lineno" href="http://github.com/rotorz/capri/blob/master/module/doc-manager.js#L48">Line: 48</a> &nbsp;&nbsp;&nbsp;(&nbsp;Module: <a href="module.capri-doc-manager.html">capri/doc-manager</a>&nbsp;) </dd> </dl> <h5>Parameters</h5> <table class="params"> <thead> <tr> <th class="param-name">Name</th> <th class="param-type">Type</th> <th class="description">Description</th> </tr> </thead> <tbody> <tr> <td class="param-name"><code class="name">callback</code></td> <td class="param-type">function | function[]</td> <td class="description"><div class="para">One or more callbacks</div></td> </tr> </tbody> </table> <h5>Example</h5> <p class="example-caption"></p> <pre class="example sh_javascript"><code>$include('~/css/jquery/special.css');
$include('~/js/jquery.special.js');

$startup(function() {
   // Special plugin is available because includes have been processed
   $('#special-widget').specialPlugin();
});</code></pre> </dd> <dt class="method-body" id="$startup,process"> <h4 id="$startup,process"><span class="type-signature">&lt;protected&gt;</span> $startup.process()</h4> </dt> <dd> <div class="summary"><div class="para">Process startup scripts explicitly</div></div> <div class="description"><div class="para"> Note: Startup scripts are usually processed automatically. </div></div> <dl class="details"> <dt class="detail-source">Source:</dt> <dd class="detail-source"> <span class="filepath">../module/doc-manager.js</span>, <a class="lineno" href="http://github.com/rotorz/capri/blob/master/module/doc-manager.js#L70">Line: 70</a> &nbsp;&nbsp;&nbsp;(&nbsp;Module: <a href="module.capri-doc-manager.html">capri/doc-manager</a>&nbsp;) </dd> </dl> <h5>Throws:</h5><dl class="type-details throws"><div class="type-desc"><div class="para">Thrown when invalid startup script is encountered</div></div><dt>Type</dt><dd><span class="param-type"><a href="caprierror.html">CapriError</a></span></dd></dl> </dd> </dl> </article> </section> </div><!-- #doc-content --> <nav id="doc-nav"> <ul> <li> <h3>Classes</h3> <ul> <li><a href="capri-hook.html">capri.Hook</a></li> <li><a href="capri-object.html">capri.Object</a></li> <li><a href="capri-ui-widget.html">capri.ui.Widget</a></li> <li><a href="caprierror.html">CapriError</a></li> </ul> </li> <li> <h3>Namespaces</h3> <ul> <li><a href="capri.html">capri</a></li> <li><a href="capri-documentmanager.html">capri.DocumentManager</a></li> <li><a href="capri-ui.html">capri.ui</a></li> <li><a href="jquery-fn.html">jQuery.fn</a></li> </ul> </li> <li> <h3>Global</h3> <ul> <li><a href="global.html#$class">$class</a></li> <li><a href="global.html#$clientUri">$clientUri</a></li> <li><a href="global.html#$include">$include</a></li> <li><a href="global.html#$include,process">$include.process</a></li> <li><a href="global.html#$namespace">$namespace</a></li> <li><a href="global.html#$namespace,getBaseId">$namespace.getBaseId</a></li> <li><a href="global.html#$namespace,getId">$namespace.getId</a></li> <li><a href="global.html#$namespace,use">$namespace.use</a></li> <li><a href="global.html#$startup">$startup</a></li> <li><a href="global.html#$startup,process">$startup.process</a></li> </ul> </li> <li> <h3>Modules</h3> <ul> <li><a href="module.capri-browser.html">capri/browser</a></li> <li><a href="module.capri-compat.html">capri/compat</a></li> <li><a href="module.capri-core.html">capri/core</a></li> <li><a href="module.capri-doc-manager.html">capri/doc-manager</a></li> <li><a href="module.capri-hook.html">capri/hook</a></li> <li><a href="module.capri-jquery-plugin.html">capri/jquery-plugin</a></li> <li><a href="module.capri-oop.html">capri/oop</a></li> </ul> </li> </ul></nav> <div class="clear"></div> <div class="generator">Documentation generated by CapriDoc (inspired by jsdoc) on Thu Sep 15 2011 20:11:31 GMT+0100 (BST)</div> <footer id="page-footer"> <a class="rotorz-home" href="http://rotorz.com" title="Rotorz Limited Home Page"><img src="http://capri.rotorz.com/img/rotorz-badge.jpg" /></a> <nav> <ul> <li><a href="http://rotorz.com/blog/category/capri">Blog</a></li> <li><a href="http://capri.rotorz.com/contribute.html">Contribute</a></li> <li><a href="http://github.com/rotorz/capri">Repository</a></li> <li><a href="http://capri.rotorz.com/license.html">License</a></li> <li><a href="http://rotorz.com/projects">Projects</a></li> </ul> </nav> <small>&copy; 2010-2011 Rotorz Limited. All rights reserved.</small> </footer> </div><!-- .content-wrap --> </div><!-- .wrap --> <script>sh_highlightDocument();</script> </body> </html>