 <!DOCTYPE html> <html> <head> <meta charset="UTF-8" /> <title>Reflection with classes &raquo; Capri - Classic object oriented JavaScript</title> <script src="http://shjs.sourceforge.net/sh_main.min.js"></script> <script src="http://shjs.sourceforge.net/lang/sh_javascript.min.js"></script> <link rel="stylesheet" type="text/css" href="http://capri.rotorz.com/style/syntax.css" /> <meta name="description" content="Capri is an open source library that allows developers to use classes and namespaces in the more classical sense. Capri also provides dynamic script and style includes when jQuery plugin variant is used." /> <meta name="keywords" content="javascript, capri, jquery, jquery plugin, javascript framework, oop, object-oriented, classes, namespaces, classical, inheritance" /> <link rel="stylesheet" type="text/css" href="http://capri.rotorz.com/style/main.css" /> <link rel="stylesheet" type="text/css" media="print" href="http://capri.rotorz.com/style/print.css" /> <link rel="alternate" type="application/rss+xml" title="Rotorz &raquo; Capri Feed" href="http://rotorz.com/blog/category/capri/feed/" /> <link rel="alternate" type="application/rss+xml" title="Rotorz &raquo; Feed" href="http://rotorz.com/blog/feed/" /> <!--[if lt IE 9]> <script type="text/javascript" src="http://capri.rotorz.com/script/ie-html5-fix.js"></script> <![endif]--> <script type="text/javascript"> var _gaq = _gaq || []; _gaq.push(['_setAccount', 'UA-23827175-1']); _gaq.push(['_setDomainName', '.rotorz.com']); _gaq.push(['_trackPageview']); (function() { var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true; ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s); })(); </script> </head> <body class="docs-page info-page narrow-page"> <div class="wrap"> <header id="page-header"> <nav class="site-nav" role="navigation"> <ul> <li class="first"><a href="http://capri.rotorz.com">Home</a></li> <li><a href="http://capri.rotorz.com/about.html">About</a></li> <li><a href="http://capri.rotorz.com/getting-started.html">Docs</a></li> <li class="last"><a href="http://rotorz.com/blog/category/capri">Blog</a></li> </ul> </nav> <a class="home" href="http://capri.rotorz.com"><img src="http://capri.rotorz.com/img/home.png" alt="Capri Title" /></a> <nav class="sub-nav" role="navigation"> <ul> <li><a href="http://capri.rotorz.com/getting-started.html">Getting Started</a></li> <li><a href="http://capri.rotorz.com/tutorial/index.html">Tutorials</a></li> <li><a href="http://capri.rotorz.com/docs/global.html">API</a></li> <li><a href="http://capri.rotorz.com/how-to-build.html">How to Build</a></li> </ul> </nav> </header> <div class="content-wrap"> <section class="content"> <h1>Reflection with classes</h1> <p>Reflection is the process of accessing and using the metadata of classes. The metadata of Capri
classes is generated automatically and required for use internally. This same metadata can also be
useful within application logic. For example, it is often useful to determine whether an object is
an instance of a particular class.</p> <p>All Capri classes inherit <samp>capri.Object</samp> which provides reflection capabilities.
Reflection logic is available statically from the class in question and also from each object
instance.</p> <p>The examples in this tutorial are based upon the following class structure:</p>
<figure> <img src="img/entity-uml.png" alt="various game classes" /> <figcaption>UML class diagram of various game classes</figcaption>
</figure> <h2>Find out about an object</h2>
<p>It is easy to determine which class an object is of:</p>
<pre class="sh_sourceCode sh_javascript"><code>
// create an object
var obj = new Vector();

// name of class
var className = obj.getClassName();    // "Vector"
// namespace and name of class
var fullName = obj.getFullClassName(); // "Vector"

// get reference to class itself
var klass = obj.getClass();
// note: "class" is a reserved keyword and cannot be used for variable name

// create new instance of class from class reference
var obj2 = new klass();

// determine if object is instance of a particular class
if (obj2.instanceOf(Vector)) {
   // yep, true!
}
if (obj2.instanceOf(Entity)) {
   // nope, false
}
</code></pre> <p>Here are some more examples that show how inheritance can be detected:</p>
<pre class="sh_sourceCode sh_javascript"><code>
var entity = new Rock();

var isObject = entity.instanceOf(capri.Object);  // true
var isEntity = entity.instanceOf(Entity);        // true
var isRock   = entity.instanceOf(Rock);          // true
var isShip   = entity.instanceOf(Spaceship);     // false
var isVector = entity.instanceOf(Vector);        // false
</code></pre> <h2>Find out about a class</h2>
<p>It is also possible to analyse a class itself:</p>
<pre class="sh_sourceCode sh_javascript"><code>
// name of class
var className = Vector.getName();           // "Vector"
var className = capri.Object.getName();     // "Object"

// namespace and name of class
var fullName = Vector.getFullName();        // "Vector"
var fullName = capri.Object.getFullName();  // "capri.Object"

// determine if class is of a particular class
if (Vector.is(capri.Object)) {
   // yep, true!
}
if (Vector.is(Vector)) {
   // yep, true!
}
if (Vector.is(Entity)) {
   // nope, false
}
</code></pre> <h2>Summary</h2>
<p>This tutorial has shown how reflection can be used to learn more about a particular object or
class.</p> <p><a href="dynamic-includes.html">Next tutorial: Dynamically including scripts and styles</a></p> </section> <div id="website-license"> <div class="left"> <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/"><img alt="Creative Commons License" style="border-width:0" src="http://i.creativecommons.org/l/by-sa/3.0/80x15.png" /></a> </div> <div class="right"> <span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Capri Project Website</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://rotorz.com" property="cc:attributionName" rel="cc:attributionURL">Rotorz Limited</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a> </div> <div class="clear"></div>
</div> </div> <footer id="page-footer"> <a class="rotorz-home" href="http://rotorz.com" title="Rotorz Limited Home Page"><img src="http://capri.rotorz.com/img/rotorz-badge.jpg" /></a> <nav role="navigation"> <ul> <li><a href="http://rotorz.com/blog/category/capri">Blog</a></li> <li><a href="http://capri.rotorz.com/contribute.html">Contribute</a></li> <li><a href="http://github.com/rotorz/capri">Repository</a></li> <li><a href="http://capri.rotorz.com/license.html">License</a></li> <li><a href="http://rotorz.com/projects">Projects</a></li> </ul> </nav> <small>&copy; 2010-2011 Rotorz Limited. All rights reserved.</small> </footer> </div> <script>sh_highlightDocument();</script> </body> </html>